Index: src/main/java/es/upm/etsisi/poo/App.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package es.upm.etsisi.poo;\r\n\r\nimport java.io.FileNotFoundException;\r\nimport java.io.FileReader;\r\nimport java.util.Scanner;\r\nimport es.upm.etsisi.poo.command.CommandManager;\r\nimport es.upm.etsisi.poo.controller.ExitController;\r\nimport es.upm.etsisi.poo.enums.*;\r\nimport es.upm.etsisi.poo.products.*;\r\nimport es.upm.etsisi.poo.ticket.*;\r\nimport es.upm.etsisi.poo.user.*;\r\n\r\npublic class App {\r\n    static Scanner sc = new Scanner(System.in);\r\n\r\n    public static void main(String[] args) {\r\n        boolean readingFromFile = false;\r\n        try {\r\n            if (args.length >= 1) {\r\n                readingFromFile = true;\r\n                String file_name = args[0];\r\n                sc = new Scanner(new FileReader(file_name));\r\n            } else {\r\n                sc = new Scanner(System.in);\r\n            }\r\n        } catch (FileNotFoundException e) {\r\n            sc = new Scanner(System.in);\r\n            throw new RuntimeException(e);\r\n        }\r\n        App application = new App();\r\n        application.init();\r\n        application.run(sc, readingFromFile);\r\n    }\r\n\r\n\r\n    private void run(Scanner scanner, boolean readingFromFile){\r\n        ExitController exitController = new ExitController();\r\n        CommandManager commandManager = new CommandManager(exitController);\r\n\r\n        while (!exitController.isExitRequested()) {\r\n            System.out.print(\"\\ntUPM> \");\r\n            String line = scanner.nextLine();\r\n\r\n            if (readingFromFile) {\r\n                System.out.println(line);\r\n            }\r\n\r\n            if (line.isBlank()) continue;\r\n\r\n            boolean result = commandManager.execute(line);\r\n        }\r\n\r\n        scanner.close();\r\n    }\r\n\r\n    private void init() {\r\n        System.out.println(\"Welcome to the ticket module App.\");\r\n        System.out.println(\"Ticket module. Type 'help' to see commands:\");\r\n    }\r\n\r\n\r\n    /*private void run(Scanner scanner, boolean readingFromFile) {\r\n        boolean cont = true;\r\n        while (cont) {\r\n            System.out.print(\"\\ntUPM> \");\r\n            String line = scanner.nextLine();\r\n            if (readingFromFile){\r\n                System.out.println(line);\r\n            }\r\n            String[] lineSepSpace = line.split(\" \");\r\n\r\n            switch (lineSepSpace[0].toLowerCase()) {\r\n                case \"prod\":\r\n                    optionsOfProd(lineSepSpace);\r\n                    break;\r\n                case \"client\":\r\n                    optionsClient(lineSepSpace);\r\n                    break;\r\n                case \"cash\":\r\n                    optionsCash(lineSepSpace);\r\n                    break;\r\n                case \"ticket\":\r\n                    optionsOfTicket(lineSepSpace);\r\n                    break;\r\n                case \"echo\":\r\n                    String[] echoSepSpace = line.split(\"\\\"\");\r\n                    System.out.println(\"\\\"\" + echoSepSpace[1] + \"\\\"\");\r\n                    break;\r\n                case \"help\":\r\n                    helpCommand();\r\n                    break;\r\n                case \"exit\":\r\n                    exitProgram();\r\n                    cont = false;\r\n                    break;\r\n                default:\r\n                    unknownCommand();\r\n                    break;\r\n            }\r\n        }\r\n        sc.close();\r\n    }\r\n\r\n    private void optionsOfProd(String[] message) {\r\n        if (message.length < 2) {\r\n            System.out.println(\"Usage: prod with add, list, update or remove\");\r\n            return;\r\n        }\r\n        String command = message[1].toLowerCase();\r\n        String input = String.join(\" \", message);\r\n        String[] rightParts = secondPartArray(input);\r\n        switch (command) {\r\n            case \"add\":\r\n                if (!input.toLowerCase().startsWith(\"prod add\")) {\r\n                    System.out.println(\"Usage: prod add <id> \\\"<name>\\\" <category> <price> [maxPers]\");\r\n                    return;\r\n                }\r\n                try {\r\n                    //line: prod add id \\name con espacios\\ category price\r\n                    Product product = null;\r\n                    if (message.length==4){\r\n                      String expireDate = message[2];\r\n                      ServiceType Stype = ServiceType.valueOf(message[3].toUpperCase());\r\n                      product =new Service((productlist.getNumservice()+1)+\"S\",Stype,expireDate,ProductType.Service);\r\n                    }else{\r\n                        String line = String.join(\" \", message);\r\n                        String name = Utils.getNameScanner(line); //cambio en get nombre de scanner\r\n                        String id = message[2];\r\n\r\n                        CategoryType type = CategoryType.valueOf(rightParts[0].toUpperCase());\r\n                        Category category = new Category(type);\r\n                        double price = Double.parseDouble(rightParts[1]);\r\n                        if (rightParts.length == 3) {\r\n                            int maxPers = Integer.parseInt(message[message.length-1]);\r\n                            product = new CustomProduct(id, name, category, price, maxPers,ProductType.ProductPersonalized);\r\n                        } else {\r\n                            product = new CustomProduct(id, name, category, price,0,ProductType.Product);\r\n                        }\r\n                    }\r\n\r\n                    if (productlist.addProduct(product)) {\r\n                        String addProduct = product.toString();\r\n                        System.out.println(addProduct);\r\n                        System.out.println(\"prod add: ok\");\r\n                    } else {\r\n                        System.out.println(\"prod add: error\");\r\n                    }\r\n                } catch (Exception e) {\r\n                    //System.out.println(\"Error: wrong format. Use prod add <id> \\\"<name>\\\" <category> <price>\");\r\n                    System.out.println(\"Error: \" + e.getMessage());\r\n                    System.out.println(\"Usage: prod add <id> \\\"<name>\\\" <category> <price> [<maxPers>]\");\r\n                }\r\n                break;\r\n\r\n            case \"list\":\r\n                if (productlist.listProducts()) {\r\n                    System.out.println(\"prod list: ok\");\r\n                } else {\r\n                    System.out.println(\"prod list: error\");\r\n                }\r\n                break;\r\n\r\n            case \"update\":\r\n                if (message.length < 5) {\r\n                    System.out.println(\"Usage: prod update <id> <field> <value>\");\r\n                    return;\r\n                }\r\n\r\n                String idToUpdate = message[2];\r\n                String field = message[3].toLowerCase();\r\n                String value;\r\n                if (field.equalsIgnoreCase(\"name\")) {\r\n                    value = Utils.getNameScanner(String.join(\" \", message));\r\n                }\r\n                else{\r\n                    value = message[message.length-1];\r\n                }\r\n                if (validField(field)) {\r\n                    if (productlist.updateProduct(idToUpdate, field, value)) {\r\n                        Product productUpdate = productlist.getProduct(idToUpdate);\r\n                        String stringUpdate = productUpdate.toString();\r\n                        System.out.println(stringUpdate);\r\n                        System.out.println(\"prod update: ok\");\r\n                    } else {\r\n                        System.out.println(\"prod update: error\");\r\n                    }\r\n                }\r\n\r\n                break;\r\n\r\n            case \"remove\":\r\n                String idRemove = message[2];\r\n                Product productRemove = productlist.getProduct(idRemove);\r\n                String stringProd = productRemove.toString();\r\n                System.out.println(stringProd);\r\n                if (productlist.removeProduct(productRemove)) {\r\n                    System.out.println(\"prod remove: ok\");\r\n                } else {\r\n                    System.out.println(\"prod remove: error\");\r\n                }\r\n                break;\r\n\r\n            case \"addmeeting\":\r\n                if (rightParts.length != 3) {\r\n                    System.out.println(\"Usage: prod \"+command+\" <id> <name> <price> <expiration: yyyy-MM-dd> <max_people>\");\r\n                    return;\r\n                }\r\n                try {\r\n                    String line = String.join(\" \", message);\r\n                    String name = Utils.getNameScanner(line);\r\n                    String id = message[2];\r\n                    double price = Double.parseDouble(rightParts[0]);\r\n                    if (!Utils.ValidDate(rightParts[1])){return;}\r\n                    String expirationStrg = rightParts[1];\r\n                    int maxPeople = Integer.parseInt(rightParts[2]);\r\n                    if (maxPeople>100){\r\n                        System.out.println(\"have exceeded the maximum number of people allowed(100)\");\r\n                        break;\r\n                    }\r\n                    if(!validatePlanningTime(ProductType.Meeting, expirationStrg)){\r\n                        return;\r\n                    }\r\n                    try {\r\n                        ComplexProduct complexProduct = new ComplexProduct(id, name, price, expirationStrg, maxPeople,ProductType.Meeting);\r\n                        if (productlist.addProduct(complexProduct)) {\r\n                            System.out.println(complexProduct);\r\n                            System.out.println(\"prod add: ok\");\r\n                        } else {\r\n                            System.out.println(\"prod add: error\");\r\n                        }\r\n                    } catch (Exception e) {\r\n                        System.out.println(\"Error creating product: \" + e.getMessage());\r\n\r\n                    }\r\n                } catch (Exception e) {\r\n                    System.out.println(\"Error: wrong format. Use prod addMeeting \" +\r\n                            \"<id> \\\"<name>\\\" <price> <expiration: yyyy-MM-dd> <max_people >\");\r\n                }\r\n                break;\r\n            case \"addfood\":\r\n                // Never used: String in = String.join(\" \", message);\r\n                if (rightParts.length != 3) {\r\n                    System.out.println(\"Usage: prod \"+command+\" <id> <name> <price> <expiration: yyyy-MM-dd> <max_people>\");\r\n                    return;\r\n                }\r\n                try {\r\n                    String line = String.join(\" \", message);\r\n                    String name = Utils.getNameScanner(line);\r\n                    String id = message[2];\r\n                    double price = Double.parseDouble(rightParts[0]);\r\n                    String expirationStrg = rightParts[1];\r\n                    int maxPeople = Integer.parseInt(rightParts[2]);\r\n                    if (maxPeople>100){\r\n                        System.out.println(\"have exceeded the maximum number of people allowed(100)\");\r\n                        break;\r\n                    }\r\n                    if(!validatePlanningTime(ProductType.Food, expirationStrg)){\r\n                        return;\r\n                    }\r\n\r\n                    try {\r\n                        ComplexProduct complexProduct = new ComplexProduct(id, name, price, expirationStrg, maxPeople,ProductType.Food);\r\n                        if (productlist.addProduct(complexProduct)) {\r\n                            System.out.println(complexProduct);\r\n                            System.out.println(\"prod add: ok\");\r\n                        } else {\r\n                            System.out.println(\"prod add: error\");\r\n                        }\r\n                    } catch (Exception e) {\r\n                        System.out.println(\"Error creating product: \" + e.getMessage());\r\n\r\n                    }\r\n                } catch (Exception e) {\r\n                    System.out.println(\"Error: wrong format. Use prod addMeeting \" +\r\n                            \"<id> \\\"<name>\\\" <price> <expiration: yyyy-MM-dd> <max_people >\");\r\n                }\r\n                break;\r\n            default:\r\n                unknownCommand();\r\n                break;\r\n        }\r\n    }\r\n\r\n    private void optionsOfTicket(String[] message) {\r\n        if (message.length < 2) {\r\n            System.out.println(\"Usage: ticket with new, add, remove or print\");\r\n            return;\r\n        }\r\n        String command = message[1].toLowerCase();\r\n\r\n\r\n        switch (command) {\r\n            case \"new\":\r\n                String[] input = String.join(\" \", message).split(\"-\");\r\n                String[] Firspart = input[0].split(\" \");\r\n                String typeTicket =\"\";\r\n                TicketType type;\r\n                if (input.length>1){\r\n                    typeTicket =input[1];\r\n                }\r\n                if (userList.containsId(Firspart[Firspart.length-1])&& userList.containsId(Firspart[Firspart.length-2])) {\r\n                    type = Utils.TypeTicket(Firspart[Firspart.length-1],typeTicket);\r\n                    if (Firspart[2].matches(\"[0-9]+\") && Firspart[2].length() >= 5) {\r\n                        currentTicket = ticketList.createTicket(Firspart[2], Firspart[3], Firspart[4],type);\r\n                        if(currentTicket == null){\r\n                            System.out.println(\"ticket new: error\");\r\n                        }else{\r\n                            currentTicket.setState(stateTicket.empty);\r\n                            System.out.println(currentTicket.toString());\r\n                            System.out.println(\"ticket new: ok\");\r\n                        }\r\n                    } else {\r\n\r\n                        currentTicket = ticketList.createTicket(null, Firspart[2], Firspart[3],type);\r\n                        System.out.println(currentTicket.toString());\r\n                        System.out.println(\"ticket new: ok\");\r\n                    }\r\n                }\r\n                else{\r\n                    System.out.println(\"Incorrect format or IDs, use:\");\r\n                    System.out.println(\"ticket new <ticketId> <CashId> <ClientID>\");\r\n                    System.out.println(\"ticket new <CashId> <ClientId>\");\r\n                }\r\n                break;\r\n            case \"add\":\r\n                try {\r\n                    String Custom = \"\";\r\n                    int quantity;\r\n                    currentTicket = ticketList.getTicket(message[2]);\r\n                    String CashId = message[3];\r\n                    String id = message[4];\r\n                    Product p = productlist.getProduct(id);\r\n\r\n                    if (userList.containsId(CashId)&& currentTicket !=null){\r\n                        if (p.getProductType() != ProductType.Service){\r\n                        quantity = Integer.parseInt(message[5]);\r\n                        if (p.getProductType() == ProductType.ProductPersonalized || p.getProductType() == ProductType.Product){\r\n                        for (int i =6;i<message.length;i++){\r\n                            Custom += (message[i]);\r\n                        }\r\n                        }else if(p.getProductType() == ProductType.Meeting || p.getProductType() == ProductType.Food){\r\n                            ComplexProduct product = (ComplexProduct) p;\r\n                            product.setPeople(quantity);\r\n                            if(!(quantity <= product.getMAX_PEOPLE())){\r\n                                System.out.println(\"have exceeded the maximum number of people allowed\");\r\n                                break;\r\n                            }\r\n                            quantity = 1;\r\n                        }\r\n                        }else{\r\n                            quantity = 1;\r\n                        }\r\n                        try {\r\n                            if (currentTicket.getState() != stateTicket.closed){\r\n                                currentTicket.addProductToTicket(productlist, id, quantity,Custom);\r\n                                System.out.println(currentTicket.toString());\r\n                                System.out.println(\"ticket add: ok\");}\r\n                            else {\r\n                                System.out.println(\"ticket closed\");\r\n                            }\r\n                        } catch (Exception e) {\r\n                            System.out.println(\"Error adding product\");\r\n                        }\r\n                    }else {\r\n                        System.out.println(\"ticket or cashID not found\");\r\n                    }\r\n                } catch (Exception e) {\r\n                    System.out.println(\"inappropriate format\");\r\n                    System.out.println(\"ticket add <ticketID> <CashId> <id> <quantity>\" +\"\\n\"+\r\n                            \"ticket add <ticketID> <CashId> <id> <people>\");\r\n                }\r\n                break;\r\n            case \"remove\":\r\n                if (message.length != 5) {\r\n                    System.out.println(\"inappropriate format\" + \"\\n\" + \"ticket remove <ticketId> <cashId> <prodId>\");\r\n                    return;\r\n                }\r\n                try {\r\n                    currentTicket = ticketList.getTicket(message[2]);\r\n                    String CashId = message[3];\r\n                    if (userList.containsId(CashId)&& currentTicket !=null){\r\n                        String id = message[4];\r\n                        if (currentTicket.getState() != stateTicket.closed){\r\n                        currentTicket.removeProduct(id);\r\n                        System.out.println(currentTicket.toString());\r\n                        System.out.println(\"ticket remove: ok\");}\r\n                        else {\r\n                            System.out.println(\"ticket closed\");\r\n                        }\r\n                    }else {\r\n                        System.out.println(\"ticket or cashID not found\");\r\n                    }\r\n                } catch (Exception e) {\r\n                    System.out.println(\"inappropriate format\" + \"\\n\" + \"ticket remove <ticketId> <cashId> <prodId>\");\r\n                }\r\n                break;\r\n            case \"print\":\r\n                try {currentTicket = ticketList.getTicket(message[2]);\r\n                    String CashId = message[3];\r\n                    String date;\r\n                    if (userList.containsId(CashId)&& currentTicket !=null){\r\n                        for (int i = 0; i<currentTicket.getNumProductInTicket();i++){\r\n                            Product p = currentTicket.getProduct(i);\r\n                            if (p.getProductType() == ProductType.Food || p.getProductType() == ProductType.Meeting){\r\n                                ComplexProduct product = (ComplexProduct) p;\r\n                                date = (product).getExpirationDate();\r\n                                if (!validatePlanningTime(p.getProductType(),date)){\r\n                                    currentTicket.removeProduct(p.getID());\r\n                                }\r\n                            }\r\n\r\n                        }\r\n                        ticketList.CloseTicket(currentTicket,Utils.getTime());\r\n                        System.out.println(currentTicket.toString());\r\n                        System.out.println(\"ticket print: ok\");\r\n                    }else {\r\n                        System.out.println(\"ticket or cashID not found\");\r\n                    }\r\n                } catch (Exception e) {\r\n                    System.out.println(\"ticket print: fail\");\r\n                }\r\n                break;\r\n            case \"list\":\r\n                System.out.println(\"Ticket list:\");\r\n                System.out.print(ticketList.toString());\r\n                System.out.println(\"ticket list: ok\");\r\n                break;\r\n            default:\r\n                unknownCommand();\r\n                break;\r\n        }\r\n    }\r\n    \r\n    private void optionsClient(String[] message) {\r\n        if (message.length < 2) {\r\n            System.out.println(\"Usage: client add/remove/list\");\r\n            return;\r\n        }\r\n        String command = message[1].toLowerCase();\r\n        switch (command) {\r\n            case \"add\":\r\n                clientAdd(message);\r\n                break;\r\n            case \"remove\":\r\n                clientRemove(message);\r\n                break;\r\n            case \"list\":\r\n                clientList();\r\n                break;\r\n            default:\r\n                unknownCommand();\r\n        }\r\n    }\r\n\r\n    private void clientAdd(String[] message) {\r\n        try {\r\n            String fullLine = String.join(\" \", message);\r\n            String name = Utils.getNameScanner(fullLine);\r\n            String[] rightParts = secondPartArray(fullLine);\r\n            \r\n            if (rightParts.length < 3) {\r\n                System.out.println(\"client add: error\");\r\n                return;\r\n            }\r\n            String dni = rightParts[0];\r\n            String email = rightParts[1];\r\n            String cashId = rightParts[2];\r\n\r\n            if (!UserValidator.validName(name)) {\r\n                System.out.println(\"client add: error name\");\r\n                return;\r\n            }\r\n            if (!UserValidator.validEmail(email)) {\r\n                System.out.println(\"client add: error email\");\r\n                return;\r\n            }\r\n            if (!UserValidator.validCashId(cashId)) {\r\n                System.out.println(\"client add: error CashId\");\r\n                return;\r\n            }\r\n            Client c = null;\r\n            if (UserValidator.validNIF(dni)){\r\n            c = new Client(name, dni, email, cashId,ClientType.Business);\r\n            }\r\n            if (UserValidator.validDNI(dni) ||UserValidator.validNIE(dni)){\r\n            c = new Client(name,dni,email,cashId,ClientType.Client);\r\n            }\r\n            if (c != null){\r\n                if (userList.addClient(c)) {\r\n                    System.out.println(\"client add: ok\");\r\n                }\r\n                else {\r\n                    System.out.println(\"client add: error\");\r\n                }\r\n            }else{\r\n                System.out.println(\"ClientID error,Incorrect clientID only accepts: DNI,NIE,NIF\");\r\n            }\r\n        } catch (Exception e) {\r\n            System.out.println(\"client add: error\");\r\n        }\r\n    }\r\n\r\n    private void clientRemove(String[] message) {\r\n        if (message.length < 3) {\r\n            System.out.println(\"client remove: error\");\r\n            return;\r\n        }\r\n        String dni = message[2];\r\n        boolean removed = userList.removeUser(dni);\r\n        if (removed) {\r\n            System.out.println(\"client remove: ok\");\r\n        } else {\r\n            System.out.println(\"client remove: error\");\r\n        }\r\n    }\r\n\r\n    private void clientList() {\r\n        userList.printClients();\r\n        System.out.println(\"client list: ok\");\r\n    }\r\n\r\n    private void optionsCash(String[] message) {\r\n        if (message.length < 2) {\r\n            System.out.println(\"Usage: cash add/remove/list/tickets\");\r\n            return;\r\n        }\r\n        String command = message[1].toLowerCase();\r\n        switch (command) {\r\n            case \"add\":\r\n                cashAdd(message);\r\n                break;\r\n            case \"remove\":\r\n                cashRemove(message);\r\n                break;\r\n            case \"list\":\r\n                cashList();\r\n                break;\r\n            case \"tickets\":\r\n                cashTickets(message);\r\n                break;\r\n            default:\r\n                unknownCommand();\r\n        }\r\n    }\r\n\r\n    private void cashAdd(String[] message) {\r\n        try {\r\n            String fullLine = String.join(\" \", message);\r\n            String name = Utils.getNameScanner(fullLine);\r\n            //Never used: String[] rightParts = secondPartArray(fullLine);\r\n            String email;\r\n            String id = null;\r\n\r\n            if (message.length >= 4 && message[2].startsWith(\"UW\")) {\r\n                id = message[2];\r\n                email = message[message.length - 1];\r\n            } else {\r\n                email = message[message.length - 1];\r\n            }\r\n\r\n            if (!UserValidator.validName(name) || !UserValidator.validEmail(email) || (id != null && !UserValidator.validCashId(id))) {\r\n                System.out.println(\"cash add: error\");\r\n                return;\r\n            }\r\n\r\n            Cash cash = new Cash(name, email, id);\r\n\r\n            boolean added = userList.addCash(cash);\r\n            if (added) {\r\n                System.out.println(\"cash add: ok\");\r\n            } else {\r\n                System.out.println(\"cash add: error\");\r\n            }\r\n        } catch (Exception e) {\r\n            System.out.println(\"cash add: error\");\r\n        }\r\n    }\r\n\r\n    private void cashRemove(String[] message) {\r\n        boolean removed = false;\r\n        if (message.length < 3) {\r\n            System.out.println(\"cash remove: error\");\r\n            return;\r\n        }\r\n        String id = message[2];\r\n        Cash cash  = (Cash) userList.getUserByID(id);\r\n        if (cash != null){\r\n        ticketList.removeTicket(cash.getId());\r\n        removed = userList.removeUser(id);\r\n        }\r\n        if (removed) System.out.println(\"cash remove: ok\");\r\n        else System.out.println(\"cash remove: error\");\r\n    }\r\n\r\n    private void cashList() {\r\n        userList.printCashiers();\r\n        System.out.println(\"cash list: ok\");\r\n    }\r\n\r\n    private void cashTickets(String[] message) {\r\n        if (message.length < 3) {\r\n            System.out.println(\"cash tickets: error\");\r\n            return;\r\n        }\r\n        String cashier = message[2];\r\n        if (UserValidator.validCashId(cashier) && userList.containsId(cashier)) {\r\n            TicketList ticketsOfCash = ticketList.getTicketsOfCash(cashier);\r\n            System.out.println(\"Tickets:\");\r\n            System.out.println(ticketsOfCash.toString());\r\n            System.out.println(\"cash tickets: ok\");\r\n        }else{\r\n            System.out.println(\"cash tickets:error\");\r\n        }\r\n    }\r\n    \r\n    \r\n    private String[] secondPartArray(String input){\r\n        int firstQuote = input.indexOf('\"');\r\n        int secondQuote = input.indexOf('\"', firstQuote + 1);\r\n\r\n        String right = input.substring(secondQuote + 1).trim();\r\n        return right.split(\" \");\r\n    }\r\n\r\n    private boolean validatePlanningTime(ProductType typeProduct, String expirationDate) {\r\n        //YYYY-MM-DD-HH:MM\r\n        String[] currentTimeString = Utils.getTime().trim().split(\"[:-]\");\r\n        String[] time = expirationDate.trim().split(\"[:-]\");\r\n        LocalDateTime now =  LocalDateTime.of(Integer.parseInt(currentTimeString[0]),Integer.parseInt(currentTimeString[1]),\r\n                Integer.parseInt(currentTimeString[2]),Integer.parseInt(currentTimeString[3]),Integer.parseInt(currentTimeString[4]));\r\n        LocalDateTime Date = LocalDateTime.of(Integer.parseInt(time[0]),Integer.parseInt(time[1]),Integer.parseInt(time[2]),\r\n                0,0);\r\n        long HourD = ChronoUnit.HOURS.between(now,Date);\r\n        boolean isValid = true;\r\n        if (typeProduct == ProductType.Food) {\r\n            if (HourD < 72) {\r\n                System.out.println(\"Error adding product\");\r\n                isValid = false;\r\n            }\r\n        }else{\r\n            if (HourD< 12){\r\n                System.out.println(\"Error adding meeting\");\r\n                isValid=false;\r\n            }\r\n        }\r\n        return isValid;\r\n    }\r\n\r\n    private boolean validField(String field) {\r\n        String[] allowedFields = {\"name\", \"category\", \"price\"};\r\n        boolean validField = false;\r\n        for (String f : allowedFields) {\r\n            if (f.equals(field)) {\r\n                validField = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (!validField) {\r\n            System.out.println(\"Error: invalid field. The allowed fields are: name, category, price\");\r\n        }\r\n        return validField;\r\n    }\r\n\r\n    private void init() {\r\n        System.out.println(\"Welcome to the ticket module App.\");\r\n        System.out.println(\"Ticket module. Type 'help' to see commands:\");\r\n    }\r\n\r\n    private void helpCommand() {\r\n        String[] commands = {\r\n                \"◦ Client/Cash:\",\r\n                \"   client add \\\"<name>\\\" <DNI> <email> <cashId>\",\r\n                \"   client remove <DNI>\",\r\n                \"   client list\",\r\n                \"   cash add [<id>] \\\"<name>\\\" <email>\",\r\n                \"   cash remove <id>\",\r\n                \"   cash list\",\r\n                \"   cash tickets <id>\",\r\n\r\n                \"◦ Ticket:\",\r\n                \"   ticket new [<id>] <cashId> <userId> -[c|p|s] (default -p option)\",\r\n                \"   ticket add <ticketId> <cashId> <prodId> <amount> [--p<txt> --p<txt>]\",\r\n                \"   ticket remove <ticketId> <cashId> <prodId>\",\r\n                \"   ticket print <ticketId> <cashId>\",\r\n                \"   ticket list\",\r\n\r\n                \"◦ Product:\",\r\n                \"   prod add [<id>] \\\"<name>\\\" <category> <price> [<maxPers>] || (\\\"<name>\\\" <category> )\",\r\n                \"   prod update <id> NAME|CATEGORY|PRICE <value>\",\r\n                \"   prod addFood [<id>] \\\"<name>\\\" <price> <expiration: yyyy-MM-dd> <max_people>\",\r\n                \"   prod addMeeting [<id>] \\\"<name>\\\" <price> <expiration: yyyy-MM-dd> <max_people>\",\r\n                \"   prod list\",\r\n                \"   prod remove <id>\",\r\n                \"◦ General:\",\r\n                \"   echo \\\"<texto>\\\"\",\r\n                \"   help\",\r\n                \"   exit\"\r\n        };\r\n        System.out.println(\"Commands:\");\r\n        for (String cmd : commands) {\r\n            System.out.println(\" \" + cmd);\r\n        }\r\n\r\n        System.out.println(\"\\n\" + \"Categories: \" +\r\n                \"MERCH, STATIONERY, CLOTHES, BOOK, ELECTRONICS\" +\r\n                \"\\nDiscounts if there are ≥2 units in the category: \" +\r\n                \"MERCH 0%, STATIONERY 5%, CLOTHES 7%, BOOK 10%, ELECTRONICS 3%\"\r\n        );\r\n    }\r\n\r\n    private void exitProgram() {\r\n        System.out.println(\"Closing application.\");\r\n        System.out.println(\"Goodbye!\");\r\n    }\r\n\r\n    private void unknownCommand() {\r\n        System.out.println(\"Command unknown. Type \\\"help\\\" to see commands:\");\r\n    }*/\r\n}\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/es/upm/etsisi/poo/App.java b/src/main/java/es/upm/etsisi/poo/App.java
--- a/src/main/java/es/upm/etsisi/poo/App.java	(revision 9d206c4f586c92f773e99b1eb935cb24b9035a25)
+++ b/src/main/java/es/upm/etsisi/poo/App.java	(date 1768166315184)
@@ -1,5 +1,4 @@
 package es.upm.etsisi.poo;
-
 import java.io.FileNotFoundException;
 import java.io.FileReader;
 import java.util.Scanner;
Index: .idea/misc.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"ExternalStorageConfigurationManager\" enabled=\"true\" />\r\n  <component name=\"MavenProjectsManager\">\r\n    <option name=\"originalFiles\">\r\n      <list>\r\n        <option value=\"$PROJECT_DIR$/pom.xml\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_17\" default=\"true\" project-jdk-name=\"openjdk-19\" project-jdk-type=\"JavaSDK\" />\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/misc.xml b/.idea/misc.xml
--- a/.idea/misc.xml	(revision 9d206c4f586c92f773e99b1eb935cb24b9035a25)
+++ b/.idea/misc.xml	(date 1768413347277)
@@ -8,5 +8,5 @@
       </list>
     </option>
   </component>
-  <component name="ProjectRootManager" version="2" languageLevel="JDK_17" default="true" project-jdk-name="openjdk-19" project-jdk-type="JavaSDK" />
+  <component name="ProjectRootManager" version="2" languageLevel="JDK_25" default="true" project-jdk-name="openjdk-19" project-jdk-type="JavaSDK" />
 </project>
\ No newline at end of file
